{"version":3,"sources":["components/UI/modal/MyModal.module.css","components/UI/button/MyButton.module.css","components/UI/input/MyInput.module.css","components/UI/Loader/Loader.module.css","context/index.js","pages/About.jsx","components/UI/button/MyButton.jsx","components/UI/input/MyInput.jsx","pages/Login.jsx","API/PostService.js","components/UI/Loader/Loader.jsx","hooks/useFetching.js","pages/PostIdPage.jsx","components/UI/select/MySelect.jsx","components/PostFilter.jsx","components/PostForm.jsx","components/PostItem.jsx","components/PostList.jsx","components/UI/modal/MyModal.jsx","components/utils/pages.jsx","components/UI/pagination/Pagination.jsx","hooks/usePosts.js","pages/Posts.jsx","hooks/useObserver.js","router/routes.js","components/AppRouter.jsx","components/UI/Navbar/Navbar.jsx","App.js","index.js"],"names":["module","exports","AuthContext","createContext","About","MyButton","children","props","className","classes","myBtn","MyInput","React","forwardRef","ref","myInput","Login","setIsAuth","useContext","onSubmit","event","preventDefault","localStorage","setItem","type","placeholder","PostService","limit","page","axios","get","params","_limit","_page","response","id","Loader","cl","loader","useFetching","callback","useState","isLoading","setIsLoading","error","setError","fetching","a","message","PostIdPage","useParams","post","setPost","comments","setComments","getById","data","fetchPostById","getCommentsByPostId","fetchComments","isComLoading","useEffect","title","map","comm","style","marginTop","email","body","MySelect","option","defaultValue","value","onChange","target","disabled","name","PostFilter","filter","setFilter","query","e","sort","selectedSort","PostForm","create","onClick","newPost","Date","now","PostItem","router","useHistory","push","removePost","PostList","posts","length","textAlign","TransitionGroup","idx","CSSTransition","timeout","classNames","number","MyModal","visible","setVisible","rootClasses","myModal","active","join","myModalContent","stopPropagation","getPageCount","totalCount","Math","ceil","Pagination","totalPages","changePage","pagesArray","useMemo","result","i","getPagesArray","p","usePosts","sortedPosts","console","log","b","localeCompare","useSortedPosts","toLowerCase","includes","Posts","setPosts","modal","setModal","setTotalPages","setLimit","setPage","sortedAndSearchedPosts","lastElement","useRef","getAll","headers","fetchPosts","isPostsLoading","postError","canLoad","observer","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","useObserver","margin","display","justifyContent","height","background","privateRoutes","path","component","exact","publicRoutes","AppRouter","isAuth","route","to","NavBar","removeItem","App","setLoading","getItem","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d210cb1d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"myModal\":\"MyModal_myModal__21qZI\",\"myModalContent\":\"MyModal_myModalContent__2y5Yo\",\"active\":\"MyModal_active__3PvCS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myBtn\":\"MyButton_myBtn__1-mun\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"myInput\":\"MyInput_myInput__1y09o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3CQGJ\",\"rotate\":\"Loader_rotate__K0hmy\"};","import { createContext } from 'react';\r\n\r\nexport const AuthContext = createContext(null);\r\n","import React from 'react';\r\n\r\nconst About = () => {\r\n  return <h1>This is page About</h1>;\r\n};\r\n\r\nexport default About;\r\n","import React from 'react';\r\nimport classes from './MyButton.module.css';\r\n\r\nconst MyButton = ({ children, ...props }) => {\r\n  return (\r\n    <button className={classes.myBtn} {...props}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default MyButton;\r\n","import React from 'react';\r\nimport classes from './MyInput.module.css';\r\n\r\nconst MyInput = React.forwardRef((props, ref) => {\r\n  return <input ref={ref} className={classes.myInput} {...props} />;\r\n});\r\n\r\nexport default MyInput;\r\n","import React, { useContext } from 'react';\r\nimport MyButton from '../components/UI/button/MyButton';\r\nimport MyInput from '../components/UI/input/MyInput';\r\nimport { AuthContext } from '../context';\r\n\r\nconst Login = () => {\r\n  const { setIsAuth } = useContext(AuthContext);\r\n\r\n  const login = event => {\r\n    event.preventDefault();\r\n    setIsAuth(true);\r\n    localStorage.setItem('auth', 'true');\r\n  };\r\n  return (\r\n    <div>\r\n      <h1>Страница для логина</h1>\r\n      <form onSubmit={login}>\r\n        <MyInput type='text' placeholder='Введите логин' />\r\n        <MyInput type='password' placeholder='Введите пароль' />\r\n        <MyButton>Войти</MyButton>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import axios from 'axios';\r\n\r\nexport default class PostService {\r\n  static async getAll(limit = 10, page = 1) {\r\n    const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\r\n      params: {\r\n        _limit: limit,\r\n        _page: page,\r\n      },\r\n    });\r\n    return response;\r\n  }\r\n\r\n  static async getById(id) {\r\n    const response = await axios.get('https://jsonplaceholder.typicode.com/posts/' + id);\r\n    return response;\r\n  }\r\n\r\n  static async getCommentsByPostId(id) {\r\n    const response = await axios.get(`https://jsonplaceholder.typicode.com/posts/${id}/comments`);\r\n    return response;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport cl from './Loader.module.css';\r\n\r\nconst Loader = () => {\r\n  return <div className={cl.loader}></div>;\r\n};\r\n\r\nexport default Loader;\r\n","import { useState } from 'react';\r\n\r\nexport const useFetching = callback => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const fetching = async (...args) => {\r\n    try {\r\n      setIsLoading(true);\r\n      await callback(...args);\r\n    } catch (e) {\r\n      setError(e.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return [fetching, isLoading, error];\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport PostService from '../API/PostService';\r\nimport Loader from '../components/UI/Loader/Loader';\r\nimport { useFetching } from '../hooks/useFetching';\r\nconst PostIdPage = () => {\r\n  const params = useParams();\r\n  const [post, setPost] = useState({});\r\n  const [comments, setComments] = useState([]);\r\n  const [fetchPostById, isLoading, error] = useFetching(async id => {\r\n    const response = await PostService.getById(id);\r\n    setPost(response.data);\r\n  });\r\n\r\n  const [fetchComments, isComLoading, comError] = useFetching(async id => {\r\n    const response = await PostService.getCommentsByPostId(id);\r\n    setComments(response.data);\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchPostById(params.id);\r\n    fetchComments(params.id);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h1>Вы открыли страницу поста c ID: {params.id} </h1>\r\n      {isLoading ? (\r\n        <Loader />\r\n      ) : (\r\n        <div>\r\n          {post.id} {post.title}\r\n        </div>\r\n      )}\r\n      <h1>Комментарии</h1>\r\n      {isComLoading ? (\r\n        <Loader />\r\n      ) : (\r\n        <div>\r\n          {comments.map(comm => {\r\n            return (\r\n              <div key={comm.id} style={{ marginTop: 15 }}>\r\n                <h5>{comm.email}</h5>\r\n                <div>{comm.body}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostIdPage;\r\n","import React from 'react';\r\n\r\nconst MySelect = ({ option, defaultValue, value, onChange }) => {\r\n  return (\r\n    <select value={value} onChange={event => onChange(event.target.value)}>\r\n      <option value='' disabled>\r\n        {defaultValue}\r\n      </option>\r\n      {option.map(option => (\r\n        <option key={option.value} value={option.value}>\r\n          {option.name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n};\r\n\r\nexport default MySelect;\r\n","import React from 'react';\r\nimport MySelect from './UI/select/MySelect';\r\nimport MyInput from './UI/input/MyInput';\r\n\r\nconst PostFilter = ({ filter, setFilter }) => {\r\n  return (\r\n    <>\r\n      <MyInput\r\n        type='text'\r\n        placeholder='Поиск'\r\n        value={filter.query}\r\n        onChange={e => setFilter({ ...filter, query: e.target.value })}\r\n      />\r\n      <MySelect\r\n        value={filter.sort}\r\n        onChange={selectedSort => setFilter({ ...filter, sort: selectedSort })}\r\n        defaultValue='Сортировка'\r\n        option={[\r\n          { value: 'title', name: 'По названию' },\r\n          { value: 'body', name: 'По описанию' },\r\n        ]}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostFilter;\r\n","import React, { useState } from 'react';\r\nimport MyInput from './UI/input/MyInput';\r\nimport MyButton from './UI/button/MyButton';\r\n\r\nconst PostForm = ({ create }) => {\r\n  const [post, setPost] = useState({\r\n    title: '',\r\n    body: '',\r\n  });\r\n\r\n  const addNewPost = e => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      ...post,\r\n      id: Date.now(),\r\n    };\r\n    create(newPost);\r\n    setPost({\r\n      title: '',\r\n      body: '',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      <MyInput\r\n        type='text'\r\n        placeholder='Название поста'\r\n        value={post.title}\r\n        onChange={e => setPost({ ...post, title: e.target.value })}\r\n      />\r\n      <MyInput\r\n        type='text'\r\n        placeholder='Описание поста'\r\n        value={post.body}\r\n        onChange={e => setPost({ ...post, body: e.target.value })}\r\n      />\r\n      <MyButton onClick={addNewPost}>Создать пост</MyButton>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PostForm;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport MyButton from './UI/button/MyButton';\r\n\r\nconst PostItem = props => {\r\n  const router = useHistory();\r\n  return (\r\n    <div className='post'>\r\n      <div className='post__content'>\r\n        <strong>\r\n          {props.post.id}. {props.post.title}\r\n        </strong>\r\n        <div>{props.post.body}</div>\r\n      </div>\r\n      <div className='post__btns'>\r\n        <MyButton onClick={() => router.push(`/posts/${props.post.id}`)}>Открыть</MyButton>\r\n        <MyButton onClick={() => props.removePost(props.post)}>Удалить</MyButton>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostItem;\r\n","import React from 'react';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport PostItem from './PostItem';\r\n\r\nconst PostList = ({ posts, title, removePost }) => {\r\n  if (!posts.length) {\r\n    return <h1 style={{ textAlign: 'center' }}>Посты не найдены!</h1>;\r\n  }\r\n  return (\r\n    <>\r\n      <h1 style={{ textAlign: 'center' }}>{title}</h1>\r\n      <TransitionGroup>\r\n        {posts.map((post, idx) => (\r\n          <CSSTransition key={post.id} timeout={500} classNames='post'>\r\n            <PostItem post={post} number={idx + 1} removePost={removePost} />\r\n          </CSSTransition>\r\n        ))}\r\n      </TransitionGroup>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostList;\r\n","import React from 'react';\r\nimport cl from './MyModal.module.css';\r\n\r\nconst MyModal = ({ children, visible, setVisible }) => {\r\n  const rootClasses = [cl.myModal];\r\n  if (visible) {\r\n    rootClasses.push(cl.active);\r\n  }\r\n  return (\r\n    <div className={rootClasses.join(' ')} onClick={() => setVisible(false)}>\r\n      <div className={cl.myModalContent} onClick={e => e.stopPropagation()}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyModal;\r\n","export const getPageCount = (totalCount, limit) => {\r\n  return Math.ceil(totalCount / limit);\r\n};\r\n\r\nexport const getPagesArray = totalPages => {\r\n  let result = [];\r\n  for (let i = 0; i < totalPages; i++) {\r\n    result.push(i + 1);\r\n  }\r\n  return result;\r\n};\r\n","import React, { useMemo } from 'react';\r\nimport { getPagesArray } from '../../utils/pages';\r\n\r\nconst Pagination = ({ totalPages, page, changePage }) => {\r\n  let pagesArray = useMemo(() => getPagesArray(totalPages), [totalPages]);\r\n\r\n  return (\r\n    <div className='page__wrapper'>\r\n      {pagesArray.map(p => (\r\n        <span key={p} className={page === p ? 'page page__current' : 'page'} onClick={() => changePage(p)}>\r\n          {p}\r\n        </span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import { useMemo } from 'react';\r\n\r\nexport const useSortedPosts = (posts, sort) => {\r\n  const sortedPosts = useMemo(() => {\r\n    console.log('sorting!');\r\n    if (sort) {\r\n      return [...posts.sort((a, b) => a[sort].localeCompare(b[sort]))];\r\n    } else {\r\n      return posts;\r\n    }\r\n  }, [sort, posts]);\r\n\r\n  return sortedPosts;\r\n};\r\n\r\nexport const usePosts = (posts, sort, query) => {\r\n  const sortedPosts = useSortedPosts(posts, sort);\r\n\r\n  const sortedAndSearchedPosts = useMemo(() => {\r\n    return sortedPosts.filter(post => post.title.toLowerCase().includes(query.toLowerCase()));\r\n  }, [query, sortedPosts]);\r\n\r\n  return sortedAndSearchedPosts;\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport PostService from '../API/PostService';\r\nimport PostFilter from '../components/PostFilter';\r\nimport PostForm from '../components/PostForm';\r\nimport PostList from '../components/PostList';\r\nimport MyButton from '../components/UI/button/MyButton';\r\nimport Loader from '../components/UI/Loader/Loader';\r\nimport MyModal from '../components/UI/modal/MyModal';\r\nimport Pagination from '../components/UI/pagination/Pagination';\r\nimport MySelect from '../components/UI/select/MySelect';\r\nimport { getPageCount } from '../components/utils/pages';\r\nimport { useFetching } from '../hooks/useFetching';\r\nimport { useObserver } from '../hooks/useObserver';\r\nimport { usePosts } from '../hooks/usePosts';\r\nimport '../styles/App.css';\r\n\r\nconst Posts = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [filter, setFilter] = useState({ sort: '', query: '' });\r\n  const [modal, setModal] = useState(false);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [limit, setLimit] = useState(10);\r\n  const [page, setPage] = useState(1);\r\n  const sortedAndSearchedPosts = usePosts(posts, filter.sort, filter.query);\r\n  const lastElement = useRef();\r\n\r\n  const [fetchPosts, isPostsLoading, postError] = useFetching(async (limit, page) => {\r\n    const response = await PostService.getAll(limit, page);\r\n    setPosts([...posts, ...response.data]);\r\n    const totalCount = response.headers['x-total-count'];\r\n    setTotalPages(getPageCount(totalCount, limit));\r\n  });\r\n\r\n  useObserver(lastElement, page < totalPages, isPostsLoading, () => {\r\n    setPage(page + 1);\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchPosts(limit, page);\r\n  }, [page, limit]);\r\n\r\n  const createPost = newPost => {\r\n    setPosts([...posts, newPost]);\r\n    setModal(false);\r\n  };\r\n\r\n  const removePost = post => {\r\n    setPosts(posts.filter(p => p.id !== post.id));\r\n  };\r\n\r\n  const changePage = page => {\r\n    setPage(page);\r\n  };\r\n\r\n  return (\r\n    <div className='App'>\r\n      <MyButton style={{ marginTop: '30px' }} onClick={() => setModal(true)}>\r\n        Создать пост\r\n      </MyButton>\r\n      <MyModal visible={modal} setVisible={setModal}>\r\n        <PostForm create={createPost} />\r\n      </MyModal>\r\n      <hr style={{ margin: '15px 0' }} />\r\n      <div>\r\n        <PostFilter filter={filter} setFilter={setFilter} />\r\n      </div>\r\n      <MySelect\r\n        value={limit}\r\n        onChange={value => setLimit(value)}\r\n        defaultValue='Кол-во элементов на странице'\r\n        option={[\r\n          { value: 5, name: '5' },\r\n          { value: 10, name: '10' },\r\n          { value: 25, name: '25' },\r\n          { value: -1, name: 'Показать все' },\r\n        ]}\r\n      />\r\n      {postError && <h1>Произошла ошибка {postError}</h1>}\r\n      {isPostsLoading && (\r\n        <div style={{ display: 'flex', justifyContent: 'center', marginTop: '50px' }}>\r\n          <Loader />\r\n        </div>\r\n      )}\r\n\r\n      <PostList posts={sortedAndSearchedPosts} removePost={removePost} title='Посты JS' />\r\n      <div ref={lastElement} style={{ height: 20, background: 'red' }}></div>\r\n      <Pagination totalPages={totalPages} page={page} changePage={changePage} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Posts;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nexport const useObserver = (ref, canLoad, isLoading, callback) => {\r\n  const observer = useRef();\r\n\r\n  useEffect(() => {\r\n    if (isLoading) return;\r\n    if (observer.current) observer.current.disconnect();\r\n\r\n    var cb = function (entries, observer) {\r\n      if (entries[0].isIntersecting && canLoad) {\r\n        callback();\r\n      }\r\n    };\r\n\r\n    observer.current = new IntersectionObserver(cb);\r\n    observer.current.observe(ref.current);\r\n  }, [isLoading]);\r\n};\r\n","import About from '../pages/About';\r\nimport Login from '../pages/Login';\r\nimport PostIdPage from '../pages/PostIdPage';\r\nimport Posts from '../pages/Posts';\r\n\r\nexport const privateRoutes = [\r\n  { path: '/about', component: About, exact: true },\r\n  { path: '/posts', component: Posts, exact: true },\r\n  { path: '/posts/:id', component: PostIdPage, exact: true },\r\n];\r\n\r\nexport const publicRoutes = [{ path: '/login', component: Login, exact: true }];\r\n","import React, { useContext } from 'react';\r\nimport { Switch, Redirect, Route } from 'react-router';\r\nimport { AuthContext } from '../context';\r\nimport { publicRoutes, privateRoutes } from '../router/routes';\r\nimport Loader from './UI/Loader/Loader';\r\n\r\nconst AppRouter = () => {\r\n  const { isAuth, isLoading } = useContext(AuthContext);\r\n  if (isLoading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return isAuth ? (\r\n    <Switch>\r\n      {privateRoutes.map(route => (\r\n        <Route path={route.path} component={route.component} exact={route.exact} key={route.path} />\r\n      ))}\r\n      <Redirect to='/posts' />\r\n    </Switch>\r\n  ) : (\r\n    <Switch>\r\n      {publicRoutes.map(route => (\r\n        <Route path={route.path} component={route.component} exact={route.exact} key={route.path} />\r\n      ))}\r\n      <Redirect to='/login' />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport MyButton from '../button/MyButton';\r\nimport { AuthContext } from '../../../context';\r\n\r\nconst NavBar = () => {\r\n  const { setIsAuth } = useContext(AuthContext);\r\n\r\n  const logout = () => {\r\n    setIsAuth(false);\r\n    localStorage.removeItem('auth');\r\n  };\r\n  return (\r\n    <>\r\n      <div className='navbar'>\r\n        <div className='navbar__links'>\r\n          <Link to='/about'>About</Link>\r\n          <Link to='/posts'>Posts</Link>\r\n        </div>\r\n        <MyButton onClick={logout}>Выйти</MyButton>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import { useState, useEffect } from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport AppRouter from './components/AppRouter';\nimport NavBar from './components/UI/Navbar/Navbar';\nimport { AuthContext } from './context';\nimport './styles/App.css';\n\nconst App = () => {\n  const [isAuth, setIsAuth] = useState(false);\n  const [isLoading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (localStorage.getItem('auth')) {\n      setIsAuth(true);\n    }\n    setLoading(false);\n  }, []);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isAuth,\n        setIsAuth,\n        isLoading,\n      }}\n    >\n      <BrowserRouter>\n        <NavBar />\n        <AppRouter />\n      </BrowserRouter>\n    </AuthContext.Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}